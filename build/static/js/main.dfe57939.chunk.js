(this.webpackJsonppart2phonebook=this.webpackJsonppart2phonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var o=t(1),r=t(15),c=t.n(r),a=t(3),u=t(0),l=function(e){return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:e.display,onChange:e.handler})]})},s=function(e){return Object(u.jsxs)("form",{onSubmit:e.addNumber,children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},i=function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("p",{children:[e.name," ",e.number," ",Object(u.jsx)("button",{onClick:e.deleteHandler,children:"Delete"})]})})},d=t(5),b=t.n(d),j="/api/persons",h=function(){return b.a.get(j).then((function(e){return e.data}))},f=function(e){return b.a.post(j,e).then((function(e){return e.data}))},m=function(e,n){return b.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){console.log("deleted: ",e)}))},p=function(e){return Object(u.jsxs)(u.Fragment,{children:[console.log("props: ",e),e.personsToShow.map((function(n){return Object(u.jsx)(i,{name:n.name,number:n.number,deleteHandler:function(){return t=n.id,o=n.name,r=e.updateState,void(window.confirm("Do you really want to remove item with id = ".concat(t,"?"))&&O(t).then((function(e){console.log(r),r({wasDeleted:!0,name:o})})));var t,o,r}},n.name)}))]})},g=t(4),v=function(e){var n,t=e.message,o=e.color;if(null===t)return null;console.log("color: ",o);var r="green";null!==o&&void 0!==o&&(r=o);var c=(n={color:r,fontSize:16,background:"lightgrey"},Object(g.a)(n,"fontSize","20px"),Object(g.a)(n,"borderStyle","solid"),Object(g.a)(n,"borderRadius","5px"),Object(g.a)(n,"padding","10px"),Object(g.a)(n,"marginBottom","10px"),n);return Object(u.jsx)("div",{style:c,children:t})},x=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(a.a)(c,2),d=i[0],b=i[1],j=Object(o.useState)(""),O=Object(a.a)(j,2),g=O[0],x=O[1],w=Object(o.useState)(""),S=Object(a.a)(w,2),C=S[0],y=S[1],N=Object(o.useState)(null),k=Object(a.a)(N,2),D=k[0],L=k[1],T=Object(o.useState)(null),z=Object(a.a)(T,2),B=z[0],E=z[1],F=function(e){console.log("updating state?"),h().then((function(n){console.log("promise fulfiled"),r(n),e&&e.wasDeleted&&H("".concat(e.name," was removed from the server"),"red")}))};Object(o.useEffect)((function(){console.log("effect"),F()}),[]),console.log("render",t.length,"persons");var H=function(e,n){L(e),E(n),setTimeout((function(){L(null),E(null)}),5e3)},J=""===C?t:t.filter((function(e){return console.log(e.name.toLowerCase(),C.toLowerCase()),e.name.toLowerCase().startsWith(C.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)(v,{message:D,color:B}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(l,{display:C,handler:function(e){var n=e.target.value;y(n)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{addNumber:function(e){e.preventDefault();var n={name:d,number:g},o=t.map((function(e){return e.name})).indexOf(d);-1===o?f(n).then((function(e){F(),b(""),x("")})).then((function(e){H("Added ".concat(d))})).catch((function(e){console.log(e.response.data.error),H(e.response.data.error,"red")})):window.confirm("Do you really want to change the number for ".concat(d,"?"))&&m(t[o].id,n).then((function(e){F()})).then((function(e){H("Updated number for ".concat(d))})).catch((function(e){H("".concat(d," was removed from the server"),"red")}))},newName:d,handleNameChange:function(e){console.log(e.target.value),b(e.target.value)},newNumber:g,handleNumberChange:function(e){console.log(e.target.value),x(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(p,{personsToShow:J,updateState:F})]})};c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.dfe57939.chunk.js.map